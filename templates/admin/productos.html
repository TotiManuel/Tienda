{% extends 'base.html' %}

{% block title %}Productos{% endblock %}

{% block content %}
<h2>Productos</h2>

<!-- Formulario agregar producto -->
<h3>Agregar Producto</h3>
<form method="POST" action="{{ url_for('admin.agregar_producto') }}">
    <input type="text" name="nombre" placeholder="Nombre" required>
    <input type="text" name="descripcion" placeholder="Descripción">
    <input type="number" step="0.01" name="precio" placeholder="Precio" required>

    <!-- SELECT PROVEEDOR -->
    <select name="proveedor_id" required>
        <option value="">-- Seleccionar proveedor --</option>
        {% for prov in proveedores %}
            <option value="{{ prov.id }}">{{ prov.nombre }}</option>
        {% endfor %}
    </select>

    <input type="text" name="imagen" placeholder="Nombre de la imagen">
    <input type="number" name="stock" placeholder="Stock" required>
    <button type="submit">Agregar</button>
</form>

<hr>

<!-- Tabla de productos -->
<h3>Productos existentes</h3>
<table border="1" cellpadding="5">
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Descripción</th>
        <th>Precio</th>
        <th>Imagen</th>
        <th>Stock</th>
        <th>Acciones</th>
    </tr>
    {% for p in productos %}
    <tr>
        <td>{{ p.id }}</td>
        <td>{{ p.nombre }}</td>
        <td>{{ p.descripcion }}</td>
        <td>{{ p.precio }}</td>
        <td>{{ p.imagen }}</td>
        <td>{{ p.stock }}</td>
        <td>
            <form method="POST" action="{{ url_for('admin.editar_producto', producto_id=p.id) }}" style="display:inline;">
                <input type="text" name="nombre" value="{{ p.nombre }}" required>
                <input type="text" name="descripcion" value="{{ p.descripcion }}">
                <input type="number" step="0.01" name="precio" value="{{ p.precio }}" required>
                <input type="text" name="imagen" value="{{ p.imagen }}">
                <input type="number" name="stock" value="{{ p.stock }}" required>
                <button type="submit">Guardar</button>
            </form>

            <form method="POST" action="{{ url_for('admin.eliminar_producto', producto_id=p.id) }}" style="display:inline;">
                <button type="submit" onclick="return confirm('¿Seguro que deseas eliminar este producto?');">
                    Eliminar
                </button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}

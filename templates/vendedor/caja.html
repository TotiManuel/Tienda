{% extends 'base.html' %}

{% block title %}Caja{% endblock %}

{% block content %}

<style>
.caja-wrapper {
    max-width: 900px;
    margin: auto;
    background: #f9fafb;
    padding: 20px;
    border-radius: 14px;
}

.caja-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.caja-header h2 {
    margin: 0;
}

.ventas-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 12px;
    overflow: hidden;
}

.ventas-table th,
.ventas-table td {
    padding: 12px;
    border-bottom: 1px solid #eee;
    text-align: left;
}

.ventas-table th {
    background: #f1f5f9;
    font-size: 14px;
}

.total-caja {
    margin-top: 15px;
    font-size: 20px;
    font-weight: bold;
    text-align: right;
}

.btn-cerrar {
    margin-top: 15px;
    width: 100%;
    padding: 12px;
    background: #dc2626;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 16px;
    cursor: pointer;
}

.btn-cerrar:hover {
    background: #b91c1c;
}
</style>

<div class="caja-wrapper">

    <div class="caja-header">
        <h2>ðŸ§¾ Caja del turno</h2>
        <span>
            Inicio: {{ turno.inicio.strftime("%H:%M") }}
        </span>
    </div>

    {% if ventas %}
    <table class="ventas-table">
        <tr>
            <th>Hora</th>
            <th>Total</th>
        </tr>

        {% for v in ventas %}
        <tr>
            <td>{{ v.fecha.strftime("%H:%M") }}</td>
            <td>
                ${{ "{:,}".format(v.total|int).replace(",", ".") }}
            </td>
        </tr>
        {% endfor %}
    </table>

    <div class="total-caja">
        Total del turno:
        ${{ "{:,}".format(total|int).replace(",", ".") }}
    </div>
    {% else %}
        <p>No hay ventas registradas en este turno.</p>
    {% endif %}

    <form method="POST" action="{{ url_for('vendedor.cerrar_caja') }}">
        <button class="btn-cerrar">
            ðŸ”’ Cerrar Caja
        </button>
    </form>

</div>

{% endblock %}

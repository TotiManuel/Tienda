{% extends 'base.html' %}

{% block title %}Proveedores{% endblock %}

{% block content %}
<h2>Proveedores</h2>

<!-- AGREGAR PROVEEDOR -->
<h3>Agregar proveedor</h3>
<form method="POST" action="{{ url_for('admin.agregar_proveedor') }}">
    <input type="text" name="nombre" placeholder="Nombre del proveedor" required>
    <input type="text" name="contacto" placeholder="Persona de contacto">
    <input type="text" name="telefono" placeholder="Teléfono">
    <input type="email" name="email" placeholder="Email">
    <button type="submit">Agregar</button>
</form>

<hr>

<!-- LISTADO -->
<h3>Proveedores registrados</h3>

<table border="1" cellpadding="6">
    <tr>
        <th>ID</th>
        <th>Nombre</th>
        <th>Contacto</th>
        <th>Teléfono</th>
        <th>Email</th>
        <th>Acciones</th>
    </tr>

    {% for p in proveedores %}
    <tr>
        <td>{{ p.id }}</td>
        <td>{{ p.nombre }}</td>
        <td>{{ p.contacto }}</td>
        <td>{{ p.telefono }}</td>
        <td>{{ p.email }}</td>
        <td>
            <!-- EDITAR -->
            <form method="POST"
                  action="{{ url_for('admin.editar_proveedor', proveedor_id=p.id) }}"
                  style="display:inline;">
                <input type="text" name="nombre" value="{{ p.nombre }}" required>
                <input type="text" name="contacto" value="{{ p.contacto }}">
                <input type="text" name="telefono" value="{{ p.telefono }}">
                <input type="email" name="email" value="{{ p.email }}">
                <button type="submit">Guardar</button>
            </form>

            <!-- ELIMINAR -->
            <form method="POST"
                  action="{{ url_for('admin.eliminar_proveedor', proveedor_id=p.id) }}"
                  style="display:inline;">
                <button type="submit"
                        onclick="return confirm('¿Eliminar proveedor?');">
                    Eliminar
                </button>
            </form>
        </td>
    </tr>
    {% else %}
    <tr>
        <td colspan="6">No hay proveedores registrados</td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
